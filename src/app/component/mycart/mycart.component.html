<div class="main">
    <div class="heading" fxLayout="row" fxLayoutAlign.sm="start start">
        <span class="home" routerLink="/dashbord/getallbook">Home /</span><span> My cart</span>
    </div>

    <mat-accordion multi class="example-headers-align">
        <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    My Cart ({{booksArraycount}})
                </mat-panel-title>

            </mat-expansion-panel-header>

            <div *ngFor='let Book of booksArray'>

                <div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="40px" style="padding: 15px;">
                    <img src="../../../assets/book3.png" width="65px" height="85px" alt="">

                    <div fxLayout="column" fxLayoutAlign="start start">
                        <p style="font-weight: 500;">{{Book.product_id.BookName}}</p>
                        <p style="color: #878787;;"> by {{Book.product_id.author}}</p>


                        <div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="10px">
                            <span style="font-size: 12px ;color: #0A0102;">Rs.{{Book.product_id.price-Book.product_id.discountPrice}}</span>
                            <span style="font-size: 12px ;color: #878787;" *ngIf="Book.product_id.discountPrice>0"><del>Rs.{{Book.product_id.price}}</del></span>

                        </div>


                        <div fxLayout="row" fxLayoutGap="10px">

                            <div class="quantitiy" fxLayout="row">
                                <img class="circle" src="../../../assets/remove_circle_outline_black_24dp.svg">
                                <div class="inputBox" fxLayoutAlign="center center">1</div>
                                <img class="circle" src="../../../assets/add_circle_outline_black_24dp.svg">
                            </div>

                            <button (click)="myRemoveCart(Book)" style="background-color: transparent;border: none;margin-left: 10px; ">Remove</button>
                        </div>


                    </div>
                    <span class="example-spacer "></span>


                </div>
                <mat-divider style="margin-top: 10px; "></mat-divider>
            </div>
            <button (click)="nextStep()" class="placeorder " style="color: white;float: right; ">Place Order</button>
        </mat-expansion-panel>

        <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Customer Details
                </mat-panel-title>
            </mat-expansion-panel-header>


            <div fxLayout="row " fxLayoutAlign="centercenter " fxLayoutGap="30px ">
                <form [formGroup]="useraddressform ">
                    <div style="display: flex;flex-direction: column; ">
                        <div style="display: flex;flex-direction: row; ">

                            <mat-form-field appearance="outline">

                                <input matInput placeholder="fullName " formControlName="fullName">
                                <mat-error style="color: red; ">
                                    Full Name is required</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline">

                                <input matInput placeholder="mobileNumber " formControlName="mobileNumber">
                                <mat-error style="color: red; ">
                                    mobileNumber is required</mat-error>
                            </mat-form-field>
                        </div>

                        <div>
                            <mat-form-field style="width: 550px; " appearance="outline">
                                <input matInput placeholder="address " formControlName="fullAddress">
                                <mat-error style="color: red; ">
                                    address is required</mat-error>
                            </mat-form-field>
                        </div>
                        <div fxLayout="row " fxLayoutAlign="centercenter " fxLayoutGap="5px ">
                            <mat-form-field appearance="outline">
                                <input matInput placeholder="city/town " formControlName="city">
                                <mat-error style="color: red; ">
                                    city/town is required</mat-error>
                            </mat-form-field>
                            <mat-form-field appearance="outline">
                                <input matInput placeholder="state " formControlName="state">
                                <mat-error style="color: red; ">
                                    state is required</mat-error>
                            </mat-form-field>

                        </div>

                        <div style="display: flex; ">
                            <div>
                                <label>Type</label><br><br>
                                <mat-radio-group aria-label="Type " fxLayout="row " fxLayoutAlign="space-around center " fxLayoutGap="100px ">
                                    <mat-radio-button value="1 ">Home</mat-radio-button>
                                    <mat-radio-button value="2 ">Work</mat-radio-button>
                                    <mat-radio-button value="3 ">Other</mat-radio-button>
                                </mat-radio-group>
                            </div>
                        </div>
                    </div>

                </form>

            </div>
            <button (click)="nextStep()" class="continuebutton " style="color: white;float: right; ">Continue</button>
            <button (click)="onSubmit()" class="continuebutton " style="color: white;float: right; "></button>
        </mat-expansion-panel>

        <mat-expansion-panel [expanded]="step===2 " (opened)="setStep(2) " hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Order Summary
                </mat-panel-title>


            </mat-expansion-panel-header>


            <div *ngFor='let Book of booksArray' fxLayoutGap="50px ">
                <div fxLayout="row " fxLayoutAlign="start center " fxLayoutGap="50px ">


                    <div>
                        <img src="../../../assets/book3.png " width="65px " height="85px " alt=" ">
                    </div>

                    <div fxLayout="column " fxLayoutAlign="start start ">
                        <div>
                            <p style="font-weight: 500; ">{{Book.product_id.BookName}}</p>
                            <p style="color: #878787;; "> by {{Book.product_id.author}}</p>

                            <p style="font-weight: 600; "> Rs. {{Book.product_id.price}}</p>
                        </div>
                    </div>
                </div>


                <mat-divider style="margin-top: 10px; ">
                </mat-divider>

            </div>

            <button (click)="ordersummary() " class="placeorder " style="color: white;float: right; ">CheckOut</button>
            <!-- <button class="placeorder " style="color: white;float: left; ">total</button> -->
            <mat-panel-title>
                Total:({{priceSum}})
            </mat-panel-title>
        </mat-expansion-panel>


    </mat-accordion>
</div>